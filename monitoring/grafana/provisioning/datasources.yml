# ============================================
# GRAFANA DATASOURCES
# Auto-provisioned on Grafana startup
# ============================================

apiVersion: 1

datasources:
  # ============================================
  # Prometheus Datasource
  # ============================================
  - name: Prometheus
    type: prometheus
    access: proxy
    url: http://prometheus:9090
    isDefault: true
    editable: true
    jsonData:
      httpMethod: POST
      timeInterval: 15s

  # ============================================
  # ClickHouse Datasource
  # ============================================
  - name: ClickHouse
    type: grafana-clickhouse-datasource
    access: proxy
    uid: clickhouse
    url: http://clickhouse:8123
    editable: true
    jsonData:
      host: clickhouse
      port: "8123"
      path: ""
      protocol: "http"
      username: "trading_user"
      defaultDatabase: "trading"
      secure: false
      tlsSkipVerify: true
    secureJsonData:
      password: "trading_pass"

  # ============================================
  # PostgreSQL Datasource
  # ============================================
  - name: PostgreSQL
    type: postgres
    access: proxy
    url: postgres:5432
    database: trading
    user: trading_user
    editable: true
    jsonData:
      sslmode: disable
      maxOpenConns: 10
      maxIdleConns: 2
      connMaxLifetime: 14400
      postgresVersion: 1600
      timescaledb: false
    secureJsonData:
      password: trading_pass
